<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="EpiConecta - Sistema de Vigil√¢ncia Epidemiol√≥gica e Comunica√ß√£o em Sa√∫de">
    <meta name="theme-color" content="#0D8ABC">
    <title>EpiConecta - Vigil√¢ncia Epidemiol√≥gica</title>

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="apple-touch-icon" href="icons/apple-icon-180x180.png">
    <link rel="manifest" href="manifest.json">

    <!-- Fontes e √çcones -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="app-container">

        <!-- Sidebar Desktop -->
        <aside class="desktop-sidebar">
            <div class="sidebar-logo">
                <i class="fas fa-shield-virus"></i>
                <h1>EpiConecta</h1>
            </div>
            <nav class="desktop-nav">
                <a href="#" class="nav-item active" data-screen="dashboard"><i class="fas fa-home"></i>
                    <span>In√≠cio</span></a>
                <a href="#" class="nav-item" data-screen="case-notification"><i class="fas fa-file-medical"></i>
                    <span>Notificar Caso</span></a>
                <a href="#" class="nav-item" data-screen="notifications"><i class="fas fa-bell"></i>
                    <span>Notifica√ß√µes</span></a>
                <a href="#" class="nav-item" data-screen="analytics"><i class="fas fa-chart-line"></i>
                    <span>Estat√≠sticas</span></a>
                <a href="#" class="nav-item" data-screen="symptoms"><i class="fas fa-notes-medical"></i>
                    <span>Triagem</span></a>
                <a href="#" class="nav-item" data-screen="chat"><i class="fas fa-comments"></i> <span>Chat</span></a>
                <a href="#" class="nav-item" data-screen="library"><i class="fas fa-book-medical"></i>
                    <span>Biblioteca</span></a>
                <a href="#" class="nav-item" data-screen="patients"><i class="fas fa-user-injured"></i>
                    <span>Pacientes</span></a>
                <a href="#" class="nav-item" data-screen="settings"><i class="fas fa-cog"></i>
                    <span>Configura√ß√µes</span></a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="main-wrapper">
            <!-- Header Mobile -->
            <header class="app-header">
                <div class="header-logo">
                    <i class="fas fa-shield-virus"></i>
                    <h1>EpiConecta</h1>
                </div>
                <div class="header-actions">
                    <button class="icon-button" id="notifications-button">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>
                    <div class="user-avatar">
                        <img src="https://ui-avatars.com/api/?name=Dr+Silva&background=1a73e8&color=fff" alt="Usu√°rio">
                    </div>
                </div>
            </header>

            <main class="main-content">

                <!-- 1. Dashboard -->
                <section class="screen active" id="dashboard-screen">
                    <div class="welcome-section">
                        <h1>Bem-vindo(a), <span id="user-name">Dr. Silva</span></h1>
                        <p class="current-date" id="current-date">22 de dezembro de 2025</p>
                    </div>

                    <div class="quick-actions-grid">
                        <div class="quick-card" data-screen="case-notification">
                            <i class="fas fa-file-medical"></i>
                            <span>Notificar Caso</span>
                        </div>
                        <div class="quick-card" data-screen="notifications">
                            <i class="fas fa-bell"></i>
                            <span>Notifica√ß√µes</span>
                        </div>
                        <div class="quick-card" data-screen="analytics">
                            <i class="fas fa-chart-line"></i>
                            <span>Estat√≠sticas</span>
                        </div>
                        <div class="quick-card" data-screen="chat">
                            <i class="fas fa-comments"></i>
                            <span>Chat</span>
                        </div>
                        <div class="quick-card" data-screen="library">
                            <i class="fas fa-book-medical"></i>
                            <span>Biblioteca</span>
                        </div>
                        <div class="quick-card" data-screen="symptoms">
                            <i class="fas fa-notes-medical"></i>
                            <span>Triagem</span>
                        </div>
                        <div class="quick-card" data-screen="patients">
                            <i class="fas fa-user-injured"></i>
                            <span>Pacientes</span>
                        </div>
                    </div>

                    <div class="alerts-section">
                        <h2>Alertas Recentes</h2>
                        <div class="alerts-grid" id="recent-alerts">
                            <!-- Populated by JS -->
                        </div>
                        <button class="see-more-btn" data-screen="notifications">Ver todos os alertas</button>
                    </div>
                </section>

                <!-- 2. Analytics (Estat√≠sticas) -->
                <section class="screen" id="analytics-screen" style="display:none;">
                    <div class="screen-header">
                        <button class="back-button" data-screen="dashboard"><i class="fas fa-arrow-left"></i></button>
                        <h1>Dados Epidemiol√≥gicos</h1>
                        <button class="icon-button"><i class="fas fa-sync"></i></button>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-card alert">
                            <i class="fas fa-virus"></i>
                            <div>
                                <h3>Casos Ativos</h3>
                                <p class="value" id="metric-active">1.234</p>
                                <span class="trend up">+18% esta semana</span>
                            </div>
                        </div>
                        <div class="metric-card warning">
                            <i class="fas fa-procedures"></i>
                            <div>
                                <h3>Interna√ß√µes</h3>
                                <p class="value" id="metric-admitted">87</p>
                                <span class="trend stable">Est√°vel</span>
                            </div>
                        </div>
                        <div class="metric-card success">
                            <i class="fas fa-heartbeat"></i>
                            <div>
                                <h3>Recuperados</h3>
                                <p class="value" id="metric-recovered">9.876</p>
                                <span class="trend up">+7% hoje</span>
                            </div>
                        </div>
                    </div>

                    <!-- New Statistics Section -->
                    <div class="stats-extended-section" style="margin-top: 20px; margin-bottom: 20px;">
                        <h2>Indicadores de Sa√∫de P√∫blica</h2>
                        <div class="stats-grid-2col">
                            <div class="stat-card">
                                <h3>Cobertura Vacinal</h3>
                                <div class="vaccine-list">
                                    <div class="vaccine-item">
                                        <div class="v-header"><span>Influenza</span> <span>85%</span></div>
                                        <div class="progress-bar"><div class="fill" style="width: 85%; background: var(--secondary-color);"></div></div>
                                    </div>
                                    <div class="vaccine-item">
                                        <div class="v-header"><span>COVID-19 (Bivalente)</span> <span>72%</span></div>
                                        <div class="progress-bar"><div class="fill" style="width: 72%; background: #FFC107;"></div></div>
                                    </div>
                                    <div class="vaccine-item">
                                        <div class="v-header"><span>Dengue (Qdenga)</span> <span>45%</span></div>
                                        <div class="progress-bar"><div class="fill" style="width: 45%; background: #F44336;"></div></div>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-card-grid">
                                 <div class="mini-stat">
                                    <i class="fas fa-mosquito" style="color: #F44336;"></i>
                                    <span class="mini-val">1.2k</span>
                                    <span class="mini-lbl">Focos Eliminados</span>
                                 </div>
                                 <div class="mini-stat">
                                    <i class="fas fa-user-nurse" style="color: var(--primary-color);"></i>
                                    <span class="mini-val">48</span>
                                    <span class="mini-lbl">Equipes em Campo</span>
                                 </div>
                                 <div class="mini-stat">
                                    <i class="fas fa-hospital" style="color: var(--secondary-color);"></i>
                                    <span class="mini-val">65%</span>
                                    <span class="mini-lbl">Ocupa√ß√£o Leitos</span>
                                 </div>
                                 <div class="mini-stat">
                                    <i class="fas fa-clipboard-check" style="color: #005299;"></i>
                                    <span class="mini-val">98%</span>
                                    <span class="mini-lbl">Notifica√ß√µes Fechadas</span>
                                 </div>
                            </div>
                        </div>
                    </div>

                    <div class="map-section">
                        <h2>Mapa de Calor Epidemiol√≥gico</h2>
                        <div class="map-controls">
                            <select id="disease-select" class="control-select">
                                <option>ü¶ü Dengue</option>
                                <option>ü¶† COVID-19</option>
                                <option>ü§í Influenza</option>
                            </select>
                            <select id="municipality-select" class="control-select">
                                <option value="gps">üìç Minha Localiza√ß√£o</option>
                                <option value="saopaulo">S√£o Paulo - SP</option>
                                <option value="rio">Rio de Janeiro - RJ</option>
                            </select>
                        </div>
                        <div id="epidemiological-map" style="height: 420px; border-radius: 12px; overflow: hidden;">
                        </div>
                    </div>
                </section>

                <!-- 3. Triagem de Sintomas -->
                <section class="screen" id="symptoms-screen" style="display:none;">
                    <div class="screen-header">
                        <button class="back-button" data-screen="dashboard"><i class="fas fa-arrow-left"></i></button>
                        <h1>Triagem de Sintomas</h1>
                        <button class="icon-button" id="clear-symptoms-btn"><i class="fas fa-trash"></i></button>
                    </div>

                    <p class="instruction-text">Marque os sintomas apresentados para uma an√°lise preliminar.</p>

                    <div class="symptoms-grid" id="symptoms-grid">
                        <!-- Generated by JS -->
                    </div>

                    <div class="action-bar">
                        <button class="btn btn-primary" id="analyze-symptoms-btn">Analisar Sintomas</button>
                    </div>

                    <div id="diagnosis-results" class="diagnosis-results hidden">
                        <h2>Resultado Preliminar</h2>
                        <div class="disclaimer-box">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Este √© um resultado preliminar. Consulte um m√©dico.</p>
                        </div>
                        <div id="results-list"></div>
                    </div>
                </section>

                <!-- 4. Notifica√ß√£o de Casos -->
                <section class="screen" id="case-notification-screen" style="display:none;">
                    <div class="notification-header">
                        <button class="back-button-header" data-screen="dashboard">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="notification-header-content">
                            <h1>Notifica√ß√£o de Doen√ßas Tropicais Negligenciadas</h1>
                            <p>Munic√≠pio de Marab√° - Par√°</p>
                        </div>
                    </div>

                    <!-- Desktop: Tabs -->
                    <div class="disease-tabs-container desktop-only">
                        <div class="disease-tabs" id="disease-tabs">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Mobile: Dropdown -->
                    <div class="disease-dropdown-container mobile-only" id="disease-dropdown-container">
                        <!-- Populated by JavaScript -->
                    </div>

                    <div class="notification-form-container">
                        <div class="notification-form-card">
                            <!-- Forms will be generated dynamically by JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- 5. Notifica√ß√µes (Lista) -->
                <section class="screen" id="notifications-screen" style="display:none;">
                    <div class="screen-header">
                        <button class="back-button" data-screen="dashboard"><i class="fas fa-arrow-left"></i></button>
                        <h1>Notifica√ß√µes</h1>
                        <button class="icon-button" id="filter-notifications-btn"><i class="fas fa-filter"></i></button>
                    </div>

                    <div class="notifications-list" id="notifications-list">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- 6. Chat Profissional -->
                <section class="screen" id="chat-screen" style="display:none;">
                    <div class="screen-header">
                        <button class="back-button" data-screen="dashboard"><i class="fas fa-arrow-left"></i></button>
                        <h1>Chat Profissional</h1>
                        <button class="icon-button" id="new-chat-btn"><i class="fas fa-plus"></i></button>
                    </div>

                    <div class="chat-container">
                        <div class="chat-rooms" id="chat-rooms">
                            <!-- Populated by JS -->
                        </div>

                        <div class="chat-messages hidden" id="chat-messages">
                            <div class="chat-header">
                                <button class="back-to-rooms"><i class="fas fa-arrow-left"></i></button>
                                <h3 id="current-chat-name">Equipe de Vigil√¢ncia</h3>
                            </div>
                            <div class="messages-container" id="messages-container"></div>
                            <div class="message-input-bar">
                                <input type="text" id="message-input" placeholder="Digite sua mensagem...">
                                <button class="send-btn"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 7. Biblioteca Digital -->
                <section class="screen" id="library-screen" style="display:none;">
                    <div class="screen-header">
                        <button class="back-button" data-screen="dashboard"><i class="fas fa-arrow-left"></i></button>
                        <h1>Biblioteca Digital</h1>
                        <button class="icon-button" id="search-library-btn"><i class="fas fa-search"></i></button>
                    </div>

                    <div class="search-bar-container">
                        <input type="text" id="library-search" class="search-input"
                            placeholder="Buscar protocolos, manuais...">
                    </div>

                    <div class="documents-list" id="documents-list">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- 8. Configura√ß√µes -->
                <section class="screen" id="settings-screen" style="display:none;">
                    <div class="screen-header">
                        <button class="back-button" data-screen="dashboard"><i class="fas fa-arrow-left"></i></button>
                        <h1>Configura√ß√µes</h1>
                    </div>

                    <div class="settings-list">
                        <div class="setting-group">
                            <h3>Conta</h3>
                            <div class="setting-item">
                                <i class="fas fa-user"></i>
                                <div>Perfil</div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                            <div class="setting-item">
                                <i class="fas fa-shield-alt"></i>
                                <div>Privacidade</div>
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>Notifica√ß√µes</h3>
                            <div class="setting-item toggle-item">
                                <i class="fas fa-bell"></i>
                                <div>Push Notifications</div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked id="push-notifications-toggle">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <button class="logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Sair
                        </button>
                    </div>
                </section>

                <!-- 9. Pacientes (Preserved from previous implementation) -->
                <section id="patients-screen" class="screen" style="display: none;">
                    <div class="patient-app-header">
                        <div class="header-left">
                            <button class="back-button" data-screen="dashboard">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <h1>Prontu√°rio Eletr√¥nico</h1>
                        </div>
                        <div class="header-right">
                            <div class="user-profile">
                                <img src="https://ui-avatars.com/api/?name=Dr+Silva&background=1a73e8&color=fff"
                                    alt="Perfil">
                            </div>
                        </div>
                    </div>

                    <div class="patient-content">
                        <!-- √Årea de Busca -->
                        <div class="patient-search-bar">
                            <div class="search-input-wrapper">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" id="patient-search-input"
                                    placeholder="Buscar por nome, CPF, CNS ou data de nascimento..." autocomplete="off">
                                <button id="patient-search-btn" class="search-btn">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                            <div class="search-suggestions">
                                <span class="suggestion-tag">Ex: 123.456.789-00</span>
                                <span class="suggestion-tag">Ex: Maria da Silva</span>
                                <span class="suggestion-tag">Ex: 15/05/1990</span>
                            </div>
                        </div>

                        <!-- √Årea de Resultados e Recentes -->
                        <div class="patient-list-container">
                            <!-- Acessados Recentemente -->
                            <div class="patient-recent-section" id="patient-recents">
                                <h2 class="section-title"><i class="fas fa-history"></i> √öltimos Acessados</h2>
                                <div class="patient-recent-grid" id="recent-patients-list">
                                    <!-- Populated by JS -->
                                </div>
                            </div>

                            <!-- Resultados da Busca -->
                            <div class="patient-results-section" id="patient-results" style="display: none;">
                                <h2 class="section-title">Resultados da Busca</h2>
                                <div class="patient-results-grid" id="results-list">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Visualiza√ß√£o Detalhada do Paciente (Overlay) -->
                        <div class="patient-detail-overlay" id="patient-profile-view" style="display: none;">
                            <div class="patient-detail-card">
                                <div class="detail-header">
                                    <button class="close-detail-btn" id="back-to-search-btn">
                                        <i class="fas fa-arrow-left"></i>
                                    </button>
                                    <h2 id="p-name">Nome do Paciente</h2>
                                </div>

                                <div class="patient-profile-header">
                                    <div class="profile-photo-container">
                                        <img id="p-photo" src="" alt="Foto do Paciente">
                                        <div class="photo-overlay">
                                            <i class="fas fa-camera"></i>
                                        </div>
                                    </div>
                                    <div class="profile-info">
                                        <div class="patient-badges" id="p-badges">
                                            <!-- Badges din√¢micos -->
                                        </div>
                                        <div class="patient-meta-grid">
                                            <div class="meta-item">
                                                <span class="label">Idade</span>
                                                <span class="value" id="p-age">42 anos</span>
                                            </div>
                                            <div class="meta-item">
                                                <span class="label">Sexo</span>
                                                <span class="value" id="p-sex">Feminino</span>
                                            </div>
                                            <div class="meta-item">
                                                <span class="label">Tipo Sangu√≠neo</span>
                                                <span class="value" id="p-blood">O+</span>
                                            </div>
                                            <div class="meta-item">
                                                <span class="label">CNS</span>
                                                <span class="value" id="p-cns">123 4567 8901 2345</span>
                                            </div>
                                            <div class="meta-item">
                                                <span class="label">CPF</span>
                                                <span class="value" id="p-cpf">123.456.789-00</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Abas -->
                                <div class="patient-tabs">
                                    <button class="p-tab active" data-tab="p-summary">Resumo</button>
                                    <button class="p-tab" data-tab="p-history">Hist√≥rico</button>
                                    <button class="p-tab" data-tab="p-vaccines">Vacinas</button>
                                    <button class="p-tab" data-tab="p-exams">Exames</button>
                                </div>

                                <!-- Conte√∫do das Abas -->
                                <div class="p-tab-content active" id="p-summary">
                                    <!-- Alergias -->
                                    <div class="p-alert-box critical" id="p-allergies-box">
                                        <h4><i class="fas fa-exclamation-triangle"></i> Alergias Conhecidas</h4>
                                        <ul id="p-allergies-list"></ul>
                                    </div>

                                    <!-- Condi√ß√µes Cr√¥nicas -->
                                    <div class="p-section-title">Condi√ß√µes Cr√¥nicas</div>
                                    <div class="p-conditions-grid" id="p-conditions-list">
                                        <!-- Cards din√¢micos -->
                                    </div>

                                    <!-- Sinais Vitais Recentes -->
                                    <div class="p-section-title">Sinais Vitais (√öltima Consulta)</div>
                                    <div class="vitals-grid">
                                        <div class="vital-card">
                                            <div class="icon"><i class="fas fa-heartbeat"></i></div>
                                            <div class="data">
                                                <span id="v-bp" class="val">118/76</span>
                                                <span class="unit">mmHg</span>
                                            </div>
                                            <div class="lbl">Press√£o Arterial</div>
                                        </div>
                                        <div class="vital-card">
                                            <div class="icon"><i class="fas fa-weight"></i></div>
                                            <div class="data">
                                                <span id="v-weight" class="val">68</span>
                                                <span class="unit">kg</span>
                                            </div>
                                            <div class="lbl">Peso</div>
                                        </div>
                                        <div class="vital-card">
                                            <div class="icon"><i class="fas fa-thermometer-half"></i></div>
                                            <div class="data">
                                                <span id="v-temp" class="val">36.4</span>
                                                <span class="unit">¬∞C</span>
                                            </div>
                                            <div class="lbl">Temperatura</div>
                                        </div>
                                        <div class="vital-card">
                                            <div class="icon"><i class="fas fa-lungs"></i></div>
                                            <div class="data">
                                                <span id="v-o2" class="val">98</span>
                                                <span class="unit">%</span>
                                            </div>
                                            <div class="lbl">Satura√ß√£o O‚ÇÇ</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="p-tab-content" id="p-history" style="display: none;">
                                    <div class="timeline" id="p-timeline">
                                        <!-- Timeline items populated by JS -->
                                    </div>
                                </div>

                                <div class="p-tab-content" id="p-vaccines" style="display: none;">
                                    <div class="vaccine-list" id="p-vaccines-list">
                                        <!-- Vaccines populated by JS -->
                                    </div>
                                </div>

                                <div class="p-tab-content" id="p-exams" style="display: none;">
                                    <div class="exams-list" id="p-exams-list">
                                        <!-- Exams populated by JS -->
                                    </div>
                                </div>

                                <!-- Bot√µes de A√ß√£o -->
                                <div class="patient-actions">
                                    <button class="btn btn-primary">Nova Consulta</button>
                                    <button class="btn btn-outline">Editar Prontu√°rio</button>
                                    <button class="btn btn-outline danger">Notificar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Bottom Nav (Mobile) -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-screen="dashboard"><i
                    class="fas fa-home"></i><span>In√≠cio</span></button>
            <button class="nav-item" data-screen="case-notification"><i class="fas fa-file-medical"></i><span>Notificar</span></button>
            <button class="nav-item" data-screen="chat"><i class="fas fa-comment-medical"></i><span>Chat</span></button>
            <button class="nav-item" data-screen="library"><i
                    class="fas fa-book-medical"></i><span>Biblioteca</span></button>
            <button class="nav-item" data-screen="patients"><i
                    class="fas fa-user-injured"></i><span>Pacientes</span></button>
        </nav>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="loading-spinner"></div>
            <p>Carregando...</p>
        </div>

    </div>

    <script src="js/app.js"></script>
</body>

</html>